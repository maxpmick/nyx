---
name: ext3grep
description: Recover deleted files from ext3 filesystems by investigating the journal and inode tables. Use when performing digital forensics, data recovery, or incident response to retrieve accidentally deleted files or analyze filesystem history on Linux systems.
---

# ext3grep

## Overview
ext3grep is a specialized forensic tool designed to recover deleted files from ext3 filesystems. It works by analyzing the filesystem's journal, superblock, and inode tables to locate and reconstruct data that has been marked as deleted but not yet overwritten. Category: Digital Forensics / Recovery.

## Installation (if not already installed)
Assume the tool is already installed. If not, use:

```bash
sudo apt install ext3grep
```

## Common Workflows

### List all deletable file paths
```bash
ext3grep --dump-names /dev/sdb1
```

### Restore a specific file by its path
```bash
ext3grep --restore-file "home/user/documents/secret.txt" /dev/sdb1
```

### Restore all files deleted after a specific timestamp
```bash
ext3grep --restore-all --after $(date -d "2023-01-01 00:00:00" +%s) /dev/sdb1
```

### Investigate a specific inode
```bash
ext3grep --inode 12345 --ls /dev/sdb1
```

## Complete Command Reference

```
ext3grep [options] [--] device-file
```

### General Options

| Flag | Description |
|------|-------------|
| `--version`, `-[vV]` | Print version and exit successfully |
| `--help` | Print help message and exit |
| `--superblock` | Print contents of superblock (implied if no action specified) |
| `--print` | Print content of block or inode, if any |
| `--ls` | Print directories with one line per entry (required for filtering) |
| `--accept <filen>` | Accept 'filen' as a legal filename (can be used multiple times) |
| `--accept-all` | Accept everything as a valid filename |
| `--journal` | Show content of the journal |
| `--show-path-inodes` | Show the inode of each directory component in paths |

### Filters

| Flag | Description |
|------|-------------|
| `--group <grp>` | Only process block group 'grp' |
| `--directory` | Only process directory inodes |
| `--after <dtime>` | Only entries deleted on or after 'dtime' (Unix timestamp) |
| `--before <dtime>` | Only entries deleted before 'dtime' (Unix timestamp) |
| `--deleted` | Only show/process deleted entries |
| `--allocated` | Only show/process allocated inodes/blocks |
| `--unallocated` | Only show/process unallocated inodes/blocks |
| `--reallocated` | Do not suppress entries with reallocated inodes |
| `--zeroed-inodes` | Do not suppress entries with zeroed inodes |
| `--depth <depth>` | Process directories recursively up to 'depth' |

### Actions

| Flag | Description |
|------|-------------|
| `--inode-to-block <ino>` | Print the block that contains inode 'ino' |
| `--inode <ino>` | Show info on inode 'ino'. Implies `--print` unless `--ls` is used |
| `--block <blk>` | Show info on block 'blk'. Implies `--print` unless `--ls` is used |
| `--histogram=[atime\|ctime\|mtime\|dtime\|group]` | Generate a histogram based on the given specs |
| `--journal-block <jblk>` | Show info on journal block 'jblk' |
| `--journal-transaction <seq>` | Show info on transaction with sequence number 'seq' |
| `--dump-names` | Write the path of files to stdout (implies `--ls`) |
| `--search-start <str>` | Find blocks that start with the fixed string 'str' |
| `--search <str>` | Find blocks that contain the fixed string 'str' |
| `--search-inode <blk>` | Find inodes that refer to block 'blk' |
| `--search-zeroed-inodes` | Return allocated inode table entries that are zeroed |
| `--inode-dirblock-table <dir>` | Print table for directory path of block numbers and inodes used |
| `--show-journal-inodes <ino>` | Show copies of inode 'ino' still in the journal |
| `--restore-inode <ino[@seqnr]>` | Restore file(s) by inode. Saves to `./RESTORED_FILES/` |
| `--restore-file 'path'` | Restore file by relative path from root. Saves to `./RESTORED_FILES/path` |
| `--restore-all` | Attempt to restore everything (use with `--after` to avoid pollution) |
| `--show-hardlinks` | Show all inodes shared by two or more files |

## Notes
- **Important**: Always run `ext3grep` on an unmounted partition or a disk image to prevent data corruption or further data loss.
- If you change any `--accept` options, you must manually remove the `stage*` files generated by the tool in the current directory.
- Restored files are placed in a directory named `RESTORED_FILES` created in the current working directory.
- Timestamps for `--after` and `--before` should be provided as Unix epoch integers.