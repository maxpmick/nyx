---
name: recoverdm
description: Recover files and data from disks or optical media with damaged sectors. It attempts to read bad sectors multiple times and can use RAW mode for CDs/DVDs to bypass error checking. Use during digital forensics, data recovery, or incident response when dealing with failing hardware, scratched optical discs, or corrupted disk images.
---

# recoverdm

## Overview
A data recovery tool designed to extract as much data as possible from devices or files with bad sectors. If a sector is unrecoverable, it inserts an empty sector to maintain file alignment. It includes `mergebad` to combine multiple damaged images of the same source into one complete image. Category: Digital Forensics.

## Installation (if not already installed)
Assume recoverdm is already installed. If not:

```bash
sudo apt install recoverdm
```

## Common Workflows

### Recovering a file from a failing hard drive
```bash
recoverdm -t 40 -i /dev/sdb -o recovery.img -l badsectors.map
```
Attempts to image a failing IDE disk, saving a map of bad sectors for later merging.

### Recovering data from a scratched CD-ROM
```bash
recoverdm -t 20 -i /dev/sr0 -o cd_recovery.iso -n 1 -r 5 -s 1
```
Uses low rotation speed and RAW mode retries to extract data from optical media.

### Merging two damaged images
```bash
mergebad -i image1.map image1.img -i image2.map image2.img -o final_recovery.img
```
Combines two different attempts at imaging the same disk to fill in missing gaps.

## Complete Command Reference

### recoverdm
Recovers data from files or devices.

```
recoverdm -t <type> -i <file/device-in> -o <fileout> [options]
```

| Flag | Description |
|------|-------------|
| `-t <type>` | Type of device/media (see Type Table below) |
| `-i <file/device-in>` | Input file or device path |
| `-o <fileout>` | Output file path |
| `-l <sectorsfile>` | Generate a mapfile containing checksums and a list of bad sectors |
| `-n <# retries>` | Number of retries for normal reads (default: 6; use 1 for CD-ROMs) |
| `-s <speed>` | Rotation speed for CD-ROM/DVD (default: 1) |
| `-r <# retries>` | Number of CD/DVD RAW read retries (default: 6; advised: at least 3) |
| `-b <offset>` | Start offset |
| `-p <count>` | Skip blocks count: number of sectors skipped after a non-read one to speed up process (default: 1) |

**Type Table (`-t`):**

| Type | Value |
|------|-------|
| FILE | 1 |
| FLOPPY | 10 |
| FLOPPY_IDE | 11 |
| FLOPPY_SCSI | 12 |
| CDROM_IDE | 20 |
| CDROM_SCSI | 21 |
| DVD_IDE | 30 |
| DVD_SCSI | 31 |
| DISK_IDE | 40 |
| DISK_SCSI | 41 |

### mergebad
Merges multiple images into one using mapfiles generated by `recoverdm`.

```
mergebad [options]
```

| Flag | Description |
|------|-------------|
| `-i <mapfile> <imagefile>` | Select a mapfile and corresponding imagefile to read (can be used multiple times) |
| `-o <outputfile>` | File to write the merged output to |
| `-l <mapfile>` | Create a new mapfile listing blocks that remained bad in all input images |
| `-s <size>` | Limit or extend the size of the output image |
| `-v` | Be verbose |
| `-h` | Show help |

## Notes
- When recovering optical media (CD/DVD), if a sector cannot be read in "normal mode," the tool automatically attempts "RAW mode" (reading without error-checking).
- The mapfile (`-l`) is critical if you plan to run the recovery multiple times (perhaps on different hardware) and merge the results.
- Using a higher skip count (`-p`) can significantly speed up the initial imaging of a very damaged disk, though it will result in more missing data.